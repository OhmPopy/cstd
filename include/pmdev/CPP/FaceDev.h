// FaceDev.h: interface for the CFaceDev class.
//
//////////////////////////////////////////////////////////////////////

#if !defined(AFX_FACEDEV_H__12CEBF8F_0914_4F23_840D_A5D37B576646__INCLUDED_)
#define AFX_FACEDEV_H__12CEBF8F_0914_4F23_840D_A5D37B576646__INCLUDED_

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#include "OthorDefine.h"
#include "./CPMDev.h"

struct CFaceDevMrg
{
  DEV_USER  m_TempUser;

  /************************************************************************/
  /*
    连接回调
  */
  /************************************************************************/
  static BOOL CPMDEV_CALL ConnectStatusCallBack(const char* cszDevAddr , DEV_CONNECT_STATUS eCNStatus , void* pvContext);
  BOOL    ConnectStatusCallBack_Imp(const char* cszDevAddr , DEV_CONNECT_STATUS eCNStatus);

  /************************************************************************/
  /*
    查询设备中转服务器归属，返回设备所属中转服务器IP地址
  */
  /************************************************************************/
  static BOOL CPMDEV_CALL QuerySrvCB(const char* cszDevAddr, PEERADR& srvAddr, void* pvContext);
  BOOL   QuerySrvCB_Imp(const char* cszDevAddr, PEERADR& srvAddr);


  /************************************************************************/
  /*
     操作回调
  */
  /************************************************************************/
  static  BOOL  CPMDEV_CALL DevCallBack(const char* sIP, DEV_OPER_TYPE eType, DEV_OPER_FLAG eFlag, void* pvContent, int nSeq, DEV_OPER_RESULT eResult, void* pvContext);     //任务回调
  int     DevCallBack_Imp(const char* sIP, DEV_OPER_TYPE eType, DEV_OPER_FLAG eFlag, void* pvContent, int nSeq, DEV_OPER_RESULT eResult);
public:
  /************************************************************************/
  /*
    初始化接口
  */
  /************************************************************************/
  BOOL Init()
  {
    return CPM_InitSys(TRUE);
}

  /************************************************************************/
  /*
      注销，回收资源
  */
  /************************************************************************/
  BOOL UnInit();

  /************************************************************************/
  /*
    设置工作模式
  */
  /************************************************************************/
  BOOL SetWorkMode(int nMode);

  /************************************************************************/
  /*
    绑定回调
  */
  /************************************************************************/
  void BindingCallBack();

  /************************************************************************/
  /*
     建立设备连接
  */
  /************************************************************************/
  BOOL Connect(const char* sIP);

  /************************************************************************/
  /*
     断开连接
  */
  /************************************************************************/
  void DisConnect(const char* sIP);

  /************************************************************************/
  /*
     与服务建立连接
  */
  /************************************************************************/
  BOOL ConnnectServer(const char* sIP, char* name, char* psw);

  /************************************************************************/
  /*
     与服务断开连接
  */
  /************************************************************************/
  BOOL DisConnnectServer(const char* sIP, char* name, char* psw);

  /************************************************************************/
  /*
     开始搜索设备
  */
  /************************************************************************/
  BOOL StartSearch();

  /************************************************************************/
  /*
     停止搜索设备
  */
  /************************************************************************/
  BOOL StopSearch();

  /************************************************************************/
  /*
     远程管理端登陆设备，进行权限验证登陆
  */
  /************************************************************************/
  BOOL Login(const char* sIP, const char* sLoginName, const char* sLoginPwd);


  /************************************************************************/
  /*
     获取设备时间,回调给数据
  */
  /************************************************************************/
  BOOL GetTime(const char* sIP);

  /************************************************************************/
  /*
     获取设备基本信息
  */
  /************************************************************************/
  BOOL GetBaseInfo(const char* sIP);


  /************************************************************************/
  /*
     获取设备统计信息
  */
  /************************************************************************/
  BOOL GetStatisInfo(const char* sIP);

  /************************************************************************/
  /*
     获取设备工作信息
  */
  /************************************************************************/
  BOOL GetWorkAttInfo(const char* sIP);

  /************************************************************************/
  /*
    下载单个用户信息
  */
  /************************************************************************/
  BOOL DLoadUserInfo(const char* sIP, const char* sUserID);

  /************************************************************************/
  /*
    下载所有用户信息
  */
  /************************************************************************/
  BOOL DLoadAllUserInfo(const char* sIP);

  /************************************************************************/
  /*
    删除用户
  */
  /************************************************************************/
  BOOL DelUser(const char* sIP, const char* sUserID);

  /************************************************************************/
  /*
     下载某时间段区间的用户
  */
  /************************************************************************/
  BOOL DLoadTimeSpanUsers(const char* sIP,  DEV_DATE& cStart,  DEV_DATE& cEnd);

  /************************************************************************/
  /*
   下载所有识别记录
  */
  /************************************************************************/
  BOOL DLoadAllIdentifyRecord(const char* sIP);

  /************************************************************************/
  /*
     下载某时间段区间的识别记录
  */
  /************************************************************************/
  BOOL DLoadTimeSpanIdentifyRecord(const char* sIP,  DEV_DATE& cStart,  DEV_DATE& cEnd);

  /************************************************************************/
  /*
   下载区间识别记录
  */
  /************************************************************************/
  BOOL DLoadRangeIdentifyRecord(const char* sIP, DEV_DL_RECORD_RANGE& cRange);


  /************************************************************************/
  /*
   下载所有报警记录
  */
  /************************************************************************/
  BOOL DLoadAllAlarmRecord(const char* sIP);

  /************************************************************************/
  /*
     下载某时间段区间的报警记录
  */
  /************************************************************************/
  BOOL DLoadTimeSpanAlarmRecord(const char* sIP,  DEV_DATE& cStart,  DEV_DATE& cEnd);

  /************************************************************************/
  /*
   下载区间报警记录
  */
  /************************************************************************/
  BOOL DLoadRangeAlarmRecord(const char* sIP, DEV_DL_RECORD_RANGE& cRange);

  /************************************************************************/
  /*
   下载所有日志
  */
  /************************************************************************/
  BOOL DLoadAllLog(const char* sIP);

  /************************************************************************/
  /*
   下载某区间的日志
  */
  /************************************************************************/
  BOOL DLoadRangeLog(const char* sIP, DEV_DL_RECORD_RANGE& cRange);


  /************************************************************************/
  /*
   下载所有变更照
  */
  /************************************************************************/
  BOOL DLoadAllChangeImage(const char* sIP);

  /************************************************************************/
  /*
   下载某区间的变更照
  */
  /************************************************************************/
  BOOL DLoadRangeChangeImage(const char* sIP, DEV_DL_RECORD_RANGE& cRange);

  /************************************************************************/
  /*
    下载时间组
    cTGArray.m_nCount=0时表示下载eType类型的所有时间组
  */
  /************************************************************************/
  BOOL DLoadTimeGroup(const char* sIP,  DEV_TIMEGROUP_ARRAY& cTGArray);

  /************************************************************************/
  /*
    删除时间组
  */
  /************************************************************************/
  BOOL DelTimeGroup(const char* sIP,  DEV_TIMEGROUP_ARRAY& cTGArray);

  /************************************************************************/
  /*
    下载权限
    cRTArray.m_nCount=0时表示下载eType类型的所有时间组
  */
  /************************************************************************/
  BOOL DLoadRight(const char* sIP,  DEV_RIGHT_ARRAY& cRTArray);

  /************************************************************************/
  /*
     删除权限
  */
  /************************************************************************/
  BOOL DelRight(const char* sIP,  DEV_RIGHT_ARRAY& cRTArray);


  /************************************************************************/
  /*
    下载用户组
    cUGArray.m_nCount=0时表示下载eType类型的所有时间组
  */
  /************************************************************************/
  BOOL DLoadUserGroup(const char* sIP,  DEV_USERGROUP_ARRAY& cUGArray);

  /************************************************************************/
  /*
     删除用户组
  */
  /************************************************************************/
  BOOL DelUserGroup(const char* sIP,  DEV_USERGROUP_ARRAY& cUGArray);

  /************************************************************************/
  /*
    紧急关门
  */
  /************************************************************************/
  BOOL EnmergCloseDoor(const char* sIP);

  /************************************************************************/
  /*
    紧急开门
  */
  /************************************************************************/
  BOOL EnmergOpenDoor(const char* sIP);

  /************************************************************************/
  /*
    恢复常规门控
  */
  /************************************************************************/
  BOOL ReocoverDoor(const char* sIP);

  /************************************************************************/
  /*
    远程开门
  */
  /************************************************************************/
  BOOL RemoteOpenDoor(const char* sIP);

  /************************************************************************/
  /*
    远程关门
  */
  /************************************************************************/
  BOOL RemoteCloseDoor(const char* sIP);

  /************************************************************************/
  /*
     设备输入输出控制
  */
  /************************************************************************/
  BOOL DevIOControl(const char* sIP,  DEV_IOCTRL& ioctrl);

  /************************************************************************/
  /*
    设备格式化
  */
  /************************************************************************/
  BOOL Formate(const char* sIP);

  /************************************************************************/
  /*
     程序更新
  */
  /************************************************************************/
  BOOL UpdateApp(char*  sIP, DEV_APPUPDATE& cAppData);

  /************************************************************************/
  /*
   开启视频
  */
  /************************************************************************/
  BOOL OpenVideo(char*  sIP, void* hwnd, frame_callback_t frame_rgb);

  /************************************************************************/
  /*
   关闭视频
  */
  /************************************************************************/
  BOOL CloseVideo(char*  sIP);


  /************************************************************************/
  /*
     批量下载用户
  */
  /************************************************************************/
  BOOL DLoadUserEx(char* sIP, DEV_CID* pUserIDArray, int nIDCount);

  /************************************************************************/
  /*
    批量删除用户
  */
  /************************************************************************/
  BOOL DelUserBatch(const char* sIP, DEV_CID* pUserIDArray, int nIDCount);

  /************************************************************************/
  /*
     批量下载记录
  */
  /************************************************************************/
  BOOL DLoadRecordEx(char* sIP,  DEV_DL_RECORD_RANGE& cRange);

  /************************************************************************/
  /*
    重启设备
  */
  /************************************************************************/
  BOOL Reboot(const char* sIP);

  /************************************************************************/
  /*
    获取设备网络配置信息
  */
  /************************************************************************/
  BOOL GetNetConfigInfo(const char* sIP);


};

#endif // !defined(AFX_FACEDEV_H__12CEBF8F_0914_4F23_840D_A5D37B576646__INCLUDED_)
